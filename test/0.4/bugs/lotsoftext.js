var jstp = require('../../../index.js');
var fs = require('fs');

var methods = {
  slow: function (dispatch) {
    fs.writeFile("heavyfilefortestingpurposes.txt", "asdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklasasdefdsaṕoasdfjuñdasjuorñljaewjadsfjdñalsfjkdasñfljkaewñflkdhaslfkjahflkjawefhwfklas", function(err) {
      if(err) {
        console.log(err);
      } else {
        console.log("The file was saved!");
        fs.unlink("heavyfilefortestingpurposes.txt", function () {
          console.log("...and was removed");
        });
      }
    }); 
  }, 

  fast: function (dispatch) {
    console.log("Here I am, the 'fast'");   
  }
}

jstp.bind({
  endpoint: {
    method: "PUT",
    resource: ["Something"]
  }
}, methods.slow, methods).bind({
  endpoint: {
    method: "PUT",
    resource: ["Something"]
  }
}, methods.fast, methods);


jstp.put({resource: ["Something"]});